---
phase: 02-authentic-sprites
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [main.js]
autonomous: true

must_haves:
  truths:
    - "Horace is recognizable as blue blob with big white eyes"
    - "Horace has stumpy legs and distinctive shape"
    - "Horace uses ZX Spectrum blue color"
  artifacts:
    - path: "main.js"
      provides: "Horace pixel sprite data and rendering"
      contains: "HORACE_SPRITE"
  key_links:
    - from: "HORACE_SPRITE data"
      to: "drawHorace()"
      via: "pixel rendering loop"
      pattern: "HORACE_SPRITE"
---

<objective>
Create authentic Horace sprite using pixel data matching the original ZX Spectrum character.

Purpose: Replace procedural rectangle-based drawing with authentic pixel sprite that matches the iconic Horace character (blue blob body, big white eyes, stumpy legs).
Output: Horace sprite data constant and updated drawHorace() function that renders from pixel patterns.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-visual-foundation/01-01-SUMMARY.md
@.planning/phases/01-visual-foundation/01-02-SUMMARY.md
@main.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Define Horace sprite pixel data</name>
  <files>main.js</files>
  <action>
Add HORACE_SPRITE constant near the top of main.js (after ZX_PALETTE) containing pixel data for the Horace character.

Horace's iconic appearance from the original game:
- Blue blob-shaped body (roughly oval/egg shape)
- Two large white eyes with black pupils
- Stumpy legs at bottom
- The "tail/mullet" bump on the back of head

Create a 16x20 pixel sprite (fits within 2x3 attribute blocks) using a 2D array where:
- 0 = transparent (paper color)
- 1 = blue (body) - use BRIGHT_BLUE
- 2 = white (eyes) - use BRIGHT_WHITE
- 3 = black (pupils) - use BLACK

Structure:
```javascript
const HORACE_SPRITE = {
  width: 16,
  height: 20,
  // Walking frame (facing right/forward)
  walking: [
    // 16 pixels wide, 20 rows tall
    // Use 0,1,2,3 color indices
  ],
  colors: ['transparent', 'BRIGHT_BLUE', 'BRIGHT_WHITE', 'BLACK']
};
```

The sprite should show:
- Rows 0-2: Top of head (rounded, blue)
- Rows 3-6: Head with large white eyes (2x2 or 3x3 pixels each) and black pupils
- Rows 7-12: Body (wider blue blob)
- Rows 13-16: Legs (two separate stumpy legs)
- Rows 17-19: Feet (slightly wider than legs)

Keep design simple and blocky - this is authentic ZX Spectrum style.
  </action>
  <verify>HORACE_SPRITE constant exists in main.js with width, height, walking array, and colors array</verify>
  <done>Horace pixel sprite data defined matching original character appearance</done>
</task>

<task type="auto">
  <name>Task 2: Update drawHorace() to render from pixel data</name>
  <files>main.js</files>
  <action>
Replace the procedural drawing in drawHorace() with pixel-based rendering from HORACE_SPRITE data.

Update drawHorace() function (around line 711) to:

1. Get the sprite data:
```javascript
const sprite = HORACE_SPRITE.walking;
const colors = HORACE_SPRITE.colors;
```

2. Loop through sprite pixels and draw:
```javascript
for (let row = 0; row < HORACE_SPRITE.height; row++) {
  for (let col = 0; col < HORACE_SPRITE.width; col++) {
    const colorIndex = sprite[row][col];
    if (colorIndex === 0) continue; // transparent

    const colorName = colors[colorIndex];
    ctx.fillStyle = ZX_PALETTE[colorName];
    ctx.fillRect(x + col, y + row, 1, 1);
  }
}
```

3. Keep the existing attribute tracking logic but update to use sprite bounds:
- Track attribute blocks covered by sprite
- Use body color (BRIGHT_BLUE) as ink color
- Paper color based on mode (BRIGHT_WHITE for ski, BLACK for road)

4. Keep the ski rendering at the bottom when skiing (the white lines below feet).

5. Update horace object dimensions if needed to match sprite:
- horace.w = HORACE_SPRITE.width (16)
- horace.h = HORACE_SPRITE.height (20)

Ensure the sprite:
- Centers on horace.x, horace.y position
- Renders cleanly at all positions
- Works in both ROAD and SKI modes
  </action>
  <verify>Run game in browser, Horace renders as pixelated blue blob character instead of rectangles</verify>
  <done>drawHorace() renders from pixel sprite data with authentic appearance</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] HORACE_SPRITE constant exists with pixel data
- [ ] drawHorace() uses pixel rendering loop
- [ ] Horace appears as blue blob with white eyes in game
- [ ] Sprite renders correctly in both ROAD and SKI modes
- [ ] No JavaScript errors in browser console
</verification>

<success_criteria>
- All tasks completed
- Horace is visually recognizable as the original character
- Sprite uses only ZX_PALETTE colors
- Attribute system properly tracks Horace's colors
</success_criteria>

<output>
After completion, create `.planning/phases/02-authentic-sprites/02-01-SUMMARY.md`
</output>
