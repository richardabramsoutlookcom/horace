---
phase: 05-presentation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [main.js, index.html]
autonomous: true

must_haves:
  truths:
    - "Text appears in blocky 8x8 pixel style (not smooth browser fonts)"
    - "Score displays on canvas at top-left"
    - "Money displays on canvas near score"
    - "Lives display on canvas"
  artifacts:
    - path: "main.js"
      provides: "SPECTRUM_FONT data array and drawText function"
      contains: "SPECTRUM_FONT"
    - path: "main.js"
      provides: "Canvas HUD rendering in draw function"
      contains: "drawText.*Score"
  key_links:
    - from: "drawText()"
      to: "SPECTRUM_FONT"
      via: "character lookup"
      pattern: "SPECTRUM_FONT\\[charCode"
    - from: "draw()"
      to: "drawText()"
      via: "HUD rendering"
      pattern: "drawText.*score"
---

<objective>
Implement ZX Spectrum ROM font and canvas-based HUD rendering.

Purpose: Replace browser-rendered HTML text with authentic 8x8 bitmap Spectrum font on canvas for authentic presentation.
Output: Font data array, drawText function, canvas HUD displaying score/money/lives.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/codebase/CONVENTIONS.md

@main.js
@index.html
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ZX Spectrum ROM font data and drawText function</name>
  <files>main.js</files>
  <action>
    Add ZX Spectrum ROM font character data and bitmap text rendering.

    1. Create SPECTRUM_FONT constant array containing 8x8 bitmap data for printable ASCII characters (32-127).
       The ZX Spectrum ROM font is well-documented. Each character is 8 bytes, each byte is a row of 8 pixels (MSB=left).
       Include at minimum: space, 0-9, A-Z, a-z, common punctuation ($:!).

    2. Create drawText(text, x, y, color) function:
       - For each character in text, look up its bitmap in SPECTRUM_FONT
       - Draw each pixel using ctx.fillRect(1,1) for "on" pixels
       - Advance x by 8 pixels per character
       - Use SPECTRUM palette color for the fill
       - Handle unknown characters by skipping or showing space

    Add these near the top of the file with other constants (after COLORS definition).

    Font reference: The ZX Spectrum font starts at ROM address 0x3D00. Character code 32 (space) through 127.
    Each character is 8 consecutive bytes, top row first, MSB is leftmost pixel.
  </action>
  <verify>Manually inspect font data array exists and drawText function is defined</verify>
  <done>SPECTRUM_FONT array and drawText() function exist in main.js</done>
</task>

<task type="auto">
  <name>Task 2: Replace HTML HUD with canvas-rendered HUD</name>
  <files>main.js, index.html</files>
  <action>
    Move HUD rendering from HTML DOM to canvas using the new drawText function.

    1. In updateHUD() function, comment out or remove the scoreEl/livesEl/moneyEl/modeEl textContent updates

    2. In the draw() function (or updateHUD if preferred), add canvas HUD rendering:
       - Draw "Score: XXXXX" at top-left (x=8, y=8) in WHITE
       - Draw "$XX" (money) next to score (x=120, y=8) in BRIGHT_YELLOW
       - Draw "Lives: X" at top-right area (x=200, y=8) in WHITE
       - Don't draw mode (not authentic, was debug info)

    3. In index.html, hide the HTML HUD elements:
       - Either add `display: none` via style attribute to #hud
       - Or remove the #hud div entirely (cleaner)
       - Keep #message for now (used for in-game messages)

    4. Ensure HUD is drawn AFTER game graphics so it appears on top.

    Authentic positioning: Original game showed score/lives at top of screen.
  </action>
  <verify>npm run build (if applicable) or open index.html in browser, verify score/lives appear in Spectrum font style on canvas</verify>
  <done>HUD renders on canvas using 8x8 bitmap font, HTML HUD hidden or removed</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] SPECTRUM_FONT array exists with character bitmap data
- [ ] drawText() function renders text pixel-by-pixel on canvas
- [ ] Score, money, lives display on canvas in blocky Spectrum style
- [ ] HTML #hud is hidden or removed
- [ ] Game still functions (no JS errors)
</verification>

<success_criteria>
- All tasks completed
- Text displays in authentic 8x8 pixel style
- Score/money/lives visible on canvas during gameplay
- No regressions in game functionality
</success_criteria>

<output>
After completion, create `.planning/phases/05-presentation/05-01-SUMMARY.md`
</output>
