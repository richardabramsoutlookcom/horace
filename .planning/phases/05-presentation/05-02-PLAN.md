---
phase: 05-presentation
plan: 02
type: execute
wave: 2
depends_on: ["05-01"]
files_modified: [main.js, index.html, style.css]
autonomous: true

must_haves:
  truths:
    - "Title screen shows HORACE GOES SKIING in Spectrum font"
    - "Title screen appears before gameplay begins"
    - "Player can start game from title screen"
  artifacts:
    - path: "main.js"
      provides: "Title mode and drawTitle function"
      contains: "MODE.TITLE"
    - path: "main.js"
      provides: "Title screen rendering"
      contains: "drawTitle"
  key_links:
    - from: "drawTitle()"
      to: "drawText()"
      via: "title text rendering"
      pattern: "drawText.*HORACE"
    - from: "start()"
      to: "MODE.TITLE"
      via: "initial mode"
      pattern: "state\\.mode.*TITLE"
---

<objective>
Create authentic canvas-rendered title screen matching original Spectrum presentation.

Purpose: Replace HTML overlay title with canvas-rendered title screen using Spectrum font for authentic feel.
Output: Title mode, canvas title screen, keyboard/touch start handling.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-presentation/05-01-SUMMARY.md

@main.js
@index.html
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add TITLE mode and drawTitle function</name>
  <files>main.js</files>
  <action>
    Create title screen mode and rendering.

    1. Add MODE.TITLE = "TITLE" to the MODE object

    2. Create drawTitle() function that renders title screen on canvas:
       - Clear canvas with BLACK background
       - Draw "HORACE GOES SKIING" centered horizontally (use BRIGHT_CYAN or BRIGHT_YELLOW)
       - Draw brief instructions: "Cross the road, rent skis, slalom gates" in WHITE
       - Draw "Press any key to start" or similar prompt (can flash/blink for effect)
       - Optionally draw Horace sprite as decoration

    3. In the draw() function, add case for MODE.TITLE:
       - If state.mode === MODE.TITLE, call drawTitle() instead of drawRoad/drawSki

    Title positioning suggestion:
    - Title at y=60 (vertically centered-ish in 192px height)
    - Instructions at y=100
    - Start prompt at y=140

    Keep centered: Calculate x position as (LOGICAL_W - textWidth) / 2 where textWidth = text.length * 8
  </action>
  <verify>Set state.mode = MODE.TITLE manually and verify title screen renders</verify>
  <done>MODE.TITLE exists, drawTitle() renders title screen with Spectrum font</done>
</task>

<task type="auto">
  <name>Task 2: Update game flow for title screen</name>
  <files>main.js, index.html, style.css</files>
  <action>
    Integrate title screen into game flow.

    1. In start() function or initialization:
       - Set initial state.mode = MODE.TITLE (instead of MODE.ROAD)
       - Start the game loop immediately (title screen is drawn via loop)

    2. Add keyboard handler for title screen:
       - Any key press when in MODE.TITLE transitions to MODE.ROAD
       - Reset game state when transitioning (resetGame or similar)

    3. Add touch handler for title screen:
       - Any touch when in MODE.TITLE transitions to MODE.ROAD

    4. Simplify or hide the HTML overlay:
       - The overlay with control selection can be hidden initially
       - OR keep it for control selection but show AFTER canvas title screen
       - Simplest: Start in TITLE mode, any key/touch goes to overlay for control pick, then game starts
       - Simpler: Skip control selection on title, use keyboard by default, touch users tap to use swipe mode

    5. For game over:
       - Instead of showing HTML overlay, transition back to MODE.TITLE
       - Show "GAME OVER" and final score on title screen before "Press any key"

    Keep the HTML overlay as fallback but it may become secondary to canvas rendering.
    For simplicity: Any keypress/touch from TITLE → show control selection overlay → pick mode → start ROAD mode.
  </action>
  <verify>Load page, verify title screen shows first, press key or tap to see control selection, pick controls to start game</verify>
  <done>Game starts at title screen, transitions properly to gameplay, game over returns to title</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Title screen renders "HORACE GOES SKIING" in Spectrum font
- [ ] Title screen appears when page loads
- [ ] Player can transition from title to game
- [ ] Game over shows final score and returns to title
- [ ] No JS errors or broken functionality
</verification>

<success_criteria>
- All tasks completed
- Title screen uses authentic Spectrum font rendering
- Game flow: Title → Game → Game Over → Title
- Both keyboard and touch can start game
</success_criteria>

<output>
After completion, create `.planning/phases/05-presentation/05-02-SUMMARY.md`
</output>
